<!-- <app-destaqueImagem *ngIf="innerWidth > 767" imagemDestaqueMobile="/wp-content/uploads/2019/10/background-simulador.jpg"
    imagemDestaqueDesktop="/wp-content/uploads/2019/10/background-simulador.jpg"
    tituloDestaque="Seu carro está a poucos passos de você" corTituloDestaque="#FF7900"
    subTituloDestaque="Faça uma simulação escolhendo o carro e veja o quanto você pode economizar"
    corSubTituloDestaque="#fff" descricaoDestaque="" corDescricaoDestaque="" #destaqueImagemComponent>
</app-destaqueImagem> -->
<app-breadCrumb breadCrumbStatus="has-step" step1Status="past-step" step2Status="past-step" step3Status="past-step"
  step4Status="active" finalizacaoSimulador="last-step" hasBanner="" #breadCrumbComponent>
</app-breadCrumb>
<div class="simulador-content container">
  <!-- <div class="foto-carro hidden-sm-down">
        <img src="{{mediaRepository}}{{session?.selectedClass?.featuredPhoto}}" />
    </div>
    <div class="foto-carro hidden-md-up">
        <img src="{{mediaRepository}}{{session?.selectedClass?.featuredPhoto}}" />
    </div>
    <div class="container">
        <div class="row">
            <div class="col-md-6 coluna-carro">
                <div class="seu-carro">Seu carro é o</div>
                <div class="nome-carro desktophighlightdark-grey mobilehighlightdark-grey">
                    {{session?.selectedClass?.brand}} {{session?.selectedClass?.class}}</div>
                <div class="nome-versao tittledark-grey">{{session?.selectedClass?.model}}</div>
            </div>
            <div class="col-md-6 coluna-itens-aluguel">
                <div class="desktopsubtittledark-grey mobilesubtittledark-grey">
                    Selecione a sua região:
                </div>
                <div class="textdark-grey">
                    Laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit .
                </div>
                <ul>
                    <li (click)="selectLocation('sp', $event)" class="location sp">
                        <img src="/assets/images/simulador/check-step-white.svg" />
                        São Paulo / SP
                    </li>
                    <li (click)="selectLocation('pr', $event)" class="location pr">
                        <img src="/assets/images/simulador/check-step-white.svg" />
                        São Paulo / SP
                    </li>
                    <li (click)="selectLocation('outras', $event)" class="location outras">
                        <img src="/assets/images/simulador/check-step-white.svg" />
                        Outras localidades
                    </li>
                </ul>
                <a *ngIf="selectedLocation !== null" (click)="hire()" class="button-secundary buttontextpink">
                    Contratar
                </a>
            </div>

        </div>
    </div> -->

  <div class="row row-position">

    <div class="custom-arrow-back" [routerLink]="['/simulador/resumo']">
      <img src="/assets/icons/nav-back.svg" />
    </div>

    <div class="col-sm-8 offset-sm-2 col-lg-6 offset-lg-3 simulador-content__regiao form-box">
      <h2 class="desktophighlightdark-grey mobilehighlightdark-grey mb-4 simulador-content__regiao--h2 text-center">
        Selecione a sua região:</h2>
      <p class="mb-4 simulador-content__regiao--p text-center">Escolha a concessionária mais próxima de você</p>

      <form [formGroup]="form" name="form" class="floating-form" *ngIf="showForm">
        <div class="floating-label select-label">
          <select class="floating-select" formControlName="regiao" name="regiao" placeholder="Outras localidades"
            (change)="selectRegiao()">
            <option value=""></option>
            <option *ngFor="let opt of localidades" [value]="opt.key">
              {{opt.value}}</option>
          </select>
          <label>Selecione sua região</label>
          <span class="obs-campo-erro" *ngIf="verifyInvalidAndTouched('regiao')">Selecione uma região</span>
        </div>
      </form>

      <div [hidden]="showForm" class="simulador-content__concessionarias">

        <div class="d-flex justify-content-center align-items-center mb-4">
          <img src="../../../assets/images/simulador/local.svg">
          <p class="mb-0 font-weight-bold ml-3 mr-3">Você está em {{ local }}</p>
          <button type="submit" name="submit" class="button-secundary buttontextpink right-button"
            (click)="alterarRegiao()">Alterar</button>
        </div>

        <perfect-scrollbar class="concessionaria-scollbar" [hidden]="hiddenPerfectScroll">
          <div class="simulador-content__concessionaria" *ngFor="let item of concessionariasFiltered; let i = index">
            <div class="d-flex justify-content-between align-items-top">
              <p class="font-weight-bold mb-0">{{ item.name }}</p>
              <img src="../../../assets/images/simulador/select-arrow.svg" (click)="collapse($event)" id="{{ i }}"
                class="arrow-colapse arrow-colapse-active">
            </div>
            <div class="concessionaria-content" id="{{ i }}">
              <p class="mb-0">{{ item.address }}</p>
              <p>Tel: {{ item.phoneNumber }} <span *ngIf="item?.cellPhoneNumber">/ Cel:
                  {{ item.cellPhoneNumber }}</span></p>
              <button type="submit" name="submit" class="button-secundary buttontextpink right-button"
                (click)="selectConcessionaria(item)">Escolher</button>
            </div>
          </div>
        </perfect-scrollbar>

        <div class="concessionaria-selected" [hidden]="!concessionariaSelected">
          <div>
            <div class="simulador-content__concessionaria">
              <div class="d-flex justify-content-between align-items-top">
                <p class="font-weight-bold mb-0">{{ concessionariaSelected.name }}</p>
              </div>
              <div>
                <p class="mb-0">{{ concessionariaSelected.address }}</p>
                <p class="mb-0">Tel: {{ concessionariaSelected.phoneNumber }} <span
                    *ngIf="concessionariaSelected?.cellPhoneNumber">/ Cel:
                    {{ concessionariaSelected.cellPhoneNumber }}</span></p>
              </div>
            </div>
          </div>

          <div class="d-flex justify-content-between align-items-center mt-4">
            <button class="button-secundary buttontextpink right-button concessionaria-selected__btn-left"
              (click)="voltarSelecaoConcessionaria()">Voltar</button>
            <button class="button-secundary buttontextpink right-button concessionaria-selected__btn-right"
              (click)="hire()">Contratar</button>
          </div>
        </div>

        <div class="concessionaria-outros" *ngIf="isOutrasLocalidades">
          <h2 class="desktophighlightdark-grey mobilehighlightdark-grey mb-4 simulador-content__regiao--h2 text-center">
            Ainda não temos atendimento para a sua região
          </h2>
          <p class="mb-4 simulador-content__regiao--p text-center">
            Nos informe seu e-mail para entrarmos em contato quando chegarmos aí
          </p>
          <form [formGroup]="formEmail" class="floating-form" role="form">
            <div class="floating-label">
              <input class="floating-input" formControlName="email" name="email" type="email">
              <label>E-mail</label>
              <span class="obs-campo-erro"
                *ngIf="formEmail.controls['email'].invalid && (formEmail.controls['email'].touched || formEmail.controls['email'].dirty)">
                E-mail inválido
              </span>
            </div>
            <div class="floating-label">
              <div class="form-buttom">
                <button type="buttom" (click)="onSendEmail()" class="button-secundary buttontextpink">Enviar</button>
              </div>
            </div>
          </form>
        </div>

        <div class="concessionaria-sendmail" *ngIf="successfulEmailing">
          <h2 class="desktophighlightdark-grey mobilehighlightdark-grey mb-4 simulador-content__regiao--h2 text-center">
            Obrigado, entraremos em contato!
          </h2>
        </div>

      </div>


    </div>
  </div>

</div>
